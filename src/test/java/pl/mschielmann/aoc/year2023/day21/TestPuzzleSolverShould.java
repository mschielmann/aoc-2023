package pl.mschielmann.aoc.year2023.day21;

import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;

import java.math.BigDecimal;

import static org.assertj.core.api.Assertions.assertThat;

class TestPuzzleSolverShould
{

    @Test
    void solvePartOneWithTestData1()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 13);

        // WHEN
        long result = puzzleSolver.solvePartOne();

        // THEN
        assertThat(result).isEqualTo(16L);
    }

    @Test
    void solvePartOneWithActualData()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(INPUT, 64);

        // WHEN
        long result = puzzleSolver.solvePartOne();

        // THEN
        assertThat(result).isEqualTo(3639L);
    }

    @Test
    void solvePartTwoWithTestDataAnd6Steps()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 6);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(BigDecimal.valueOf(16L));
    }

    @Test
    void solvePartTwoWithTestDataAnd10Steps()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 10);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(BigDecimal.valueOf(50L));
    }

    @Test
    void solvePartTwoWithTestDataAnd50Steps()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 50);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(BigDecimal.valueOf(1594L));
    }

    @Test
    void solvePartTwoWithTestDataAnd100Steps()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 100);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(BigDecimal.valueOf(6536L));
    }

    @Test
    void solvePartTwoWithTestDataAnd500Steps()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 500);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(BigDecimal.valueOf(167004L));
    }

    @Test
    void solvePartTwoWithTestDataAnd1000Steps()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 1000);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(BigDecimal.valueOf(668697));
    }

    @Test
    void solvePartTwoWithTestDataAnd5000Steps()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(TEST_INPUT, 5000);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(BigDecimal.valueOf(16733044));
    }

    @Disabled
    @Test
    void solvePartTwoWithActualData()
    {
        // GIVEN
        PuzzleSolver puzzleSolver = new PuzzleSolver(INPUT, 26501365);

        // WHEN
        BigDecimal result = puzzleSolver.solvePartTwo();

        // THEN
        assertThat(result).isEqualTo(new BigDecimal("0"));
    }

    private static final String TEST_INPUT = """
            ...........
            .....###.#.
            .###.##..#.
            ..#.#...#..
            ....#.#....
            .##..S####.
            .##..#...#.
            .......##..
            .##.#.####.
            .##..##.##.
            ...........
            """;

    private static final String TEST_INPUT_2 = """
            .....5.....
            ....545....
            ...54345...
            ..5432345..
            .543212345.
            54321012345
            .543212345.
            ..5432345..
            ...54345...
            ....545....
            .....5.....
            """;

    static final String INPUT = """
            ...................................................................................................................................
            ..............#............#..#......#.##.....#..##..##.#...............#.........#......#....#..#.......#............#.#..........
            .......##.......#..#..................#.......#...#..##.##.................##......#.......#..#.....##........##..#.....#......###.
            .......#...#..#...........#............#..#..........#.#..#................#.....#......#.................###.....#.#....#.........
            ...........#......#....#...#...#........#.............#....................#......#...............#..#..........#..............#...
            ...#.#..#.#............................#.....##........#........#..................#.#....##.............#.##...#......###.........
            ..#......#.........#...........#....#.....#..........#.................................#.................#............#..#......##.
            .##...#...#....#................#.#.#.....#..................................................#...#.....#...#..#...............##...
            .......#.............#.#..#........#.#...........#.#............#..#...........##.#....##...........#.........#..#.....#...........
            ......#......#...............#........#.....#...##.#...........................#....#..#.#......#....#.....#...#....#.........#....
            ..................##.#.......#.....#.......#......#...........#.#...............#.....#.##..#....#....#..............#.#..#...#....
            ...........#..........#......................#.............#...##......##...............#.......##.......#.......#..#....#.........
            .....#..................#............#...#.......#...........#.......#................#..#...#....#.......##...#.....#........#....
            ...#...........#..............##...##.....#.#..#...............#....................#.......#..#..#.....#..#...#.............#..#..
            .#......#.......................#......#.#..#.#...............#...............................#.#..#......#..........#....#....#...
            ..........#........#.........##.#...#.....................#.......#...#...............#...#..#......#..#.#........#...#...#........
            .##.....#..#...............#............................#.............#..................#.....#...#.#....#......#.....#...........
            ....#...#..#.##.#........#..#.............................#..............#....#............#.....#.....#.#...#...#.......#....#.#..
            ......#.......#..#........#...........##............#.....##...##.............#........#....................#......#.......#.......
            .#......#............#...#..#..#..##..................#...#...............#...............#.............#..#..#.##..#......#..#....
            ............#.............#...#.......#..........#....#..##....#...#...#.#.....#..............#...#....##..........................
            ...##...#.......#........#.#...#....#...#................................#.....#.#........#.......#.....#..........................
            .#......#.......#...##.#..##.......#.......................#.#.....#.......................#.....#.......#.........#..........#.#..
            .........#...........#...........................#.........##.......#......##..#............#..#.........#.......#....#............
            ......................#....##..................#.......#..........#..#...#.##.#.....................#.#...#....#.......#.......##..
            ..##.##...........#....#...#...#..#.#........##.....#.........#...#......#.#........#.............................#...#............
            ...........###...#..##.....#..................................#....##........#.#....#..............#...#..##.....#.....#......#..#.
            ....#....##.#........#.........##...............#............#....#..........#.....................#................#.#............
            .#..##.#....#...............##.#.............#..#..............#......###.....#.#......................#.....##.........##.......#.
            ...#............#.......#..#...#...........#........#....#......#..............#.....................#..#..........................
            .#...................#........#.........#.#.................#............#............#.#..................#...#....#....#.........
            .......#..#........#..........#..........#.#.....#..##.........#..............#......#........................##.....#.#...........
            ............#.............................###........#.........#...#......#...#.#.....#...............#....##...#....##..##....#...
            ....#...#.##.......#.#..............##..................###..##......#........#.....#.#...................#...#......#........#..#.
            ..............##...#....##................###....###.#...#........#.....#..................#..............#...#.....#...#..........
            ..##......#.##......##....#........#...#..#...#............#...#....#..#.............#........#..................#........#........
            ..#....................#.#........#....#.....................#............#......#...#.....##.............#..........#..........#..
            .........#...##..#........................#.##.....#...............#..##...#.....#..#............................#...#..##.#.....#.
            .......................#........#.#.........#..#.......##..........................#..#.....#..................##..................
            ...............#...............#...#.........##......#.........#..#......#..#.........#....#...................#..#.#...###........
            ..#.#...#..#......##.......................#...#......#..............#......................#..#...............##..................
            ...........#.................#.....#..........##.........#..........#.....#............#....#.........................#.....#......
            .........#..##....#..............#...#..........#......#..#.#.#..........#..#....#............##..#............#........#.#....#...
            .....#.#..###....#.........#...#.....#........#..#.....##...#......#.................##...............#................#.....#.....
            .......#....#..............#.#...#........#.....#...............#..#..#................#.........#...................##.....#......
            ......#...#.................#.#...........#.#.................................#.#.##.......#......#...#..#...................#.##..
            ..#...........#........#...#...#.....#...#.......#........##...#.......#...................................#..........#............
            ......#..#..#..........#..#...#......#..............#..#....#.....#.#....#........#.###.......#..#.#.....................#...#.....
            ..#..................#..#........#...#..........#..#.#....#...........#.#...#...#..#..#.#........#..#.......##...................#.
            ..#......##.............#.........#......#.##...##.#.#...#...........#.........#.##...#..#.....#...#....#..........................
            ................................##............#..#.............#...........#........#.##.......#.#...#..#...#.#........#.......#...
            ..........................#.........................#..........#....#.....#......#.#.......#.#..#.....#.....#..#.................#.
            ...#.............#...#...#...#...#.....#.........#.................#...##.....#......................#.....#.#.#.........##....#...
            .....#...........#.##.#...#...#.#.#....#......#...#..#..#...#...#.#.#.#.##.......#.........#..........#...................#....##..
            ......#..................##..##.#.......#..............#.#...............#.#...#...##.......#.......#.....#....#...............#...
            ...#.........................#........##........#....#...#.....#....................#......#..#...........#.#.##..............#....
            .............#........#....####..##..........#.#..............#...#............#.............##...####..........##...........##....
            ................#.....##..........#........#..##.#................#.......#.##....#.......#..#...##......##........................
            .#.........#...#.......#.#.#....#.....#..................##.#.......#......#......#....#.......#...#.....#...#.....#...#.......#...
            ..........#...#..............#....#..#..#...............##.....#.......#...............#................#.#.#.#.........#..........
            ..............#.#...........#.......#............#..#..#.#..............#....#..##.#.#........#...#................#...#.#.........
            .................................#............#...#................#...#......#.#...#..#............#............#.................
            ..............##....#........#............#.#...#.#....#...##..##........#.#.#....................#.#..........#.#....#....#.......
            ..........#.......#...#...#...#.#..#..#......#.......#..........#.........#..#.....................#........#....#..#.....#........
            .....#....#........................#...#.#..#.....#...#.#.........#..........#.....#..#..#..###..#..............#..................
            .................................................................S.................................................................
            ...............#................#.........#....#.#...........##.....#........................#.......#..#.#.....###..##.#..........
            ..........#....#........#...#..#.......#.#.........#.........#..#.....###......#.........#...#........#....#...#....##.............
            .......##..............#........##.........#........#..#.#......#..........#........#....#............##.#........#....#..#........
            .........##...........#....#.#.....#.........#.#....#.....##..#.....#.......#..#.#..................#.#......#.....................
            ..........##....##....#......##.......#...........#............#.......###.......##..#.#.#..#....#...#.........#.###.#.#...........
            .................#.#..........#...#...#........#........#..###..............#....#............#.........#.......#.#....##..........
            .##...............................#..#.#.......#...#....#...#............#......#........#....#.#....#..#.......#..#...............
            ................#..................#.......###..#..........#.#.................#..##......##.#........#......####..................
            .....#...............................#..#.#.#....#.#............#....#....................##....#..............................#...
            ..#............#.#...#...........#.........#......#.................##.#...#.......................##..#...........................
            ................#......#....#...##..#........##..#.##..#.......#........#..........#................#..............................
            .................................#..###..........#.....##............##.....##.......#.#.#....#..#.............#..#............#...
            ..#...#..............#............###...........#.#.#.#..#....#.#..#...#.....#..........................#....#...........#.#..#..#.
            .#.###...#........#..............#.#........#.......#.......#.........#.....#...#..###...##..##..#....#.#......#.........#......#..
            ..........#.........#.......#..##.#.....#.##..#.........#..#...#.....#.#.##....#.........#.#.....#......#..............#...#.......
            ..#..#..#...#.........#..##...#..#...#......#.............#.#.........#.#...##.....#.....#...#..#.....#..##...........#........#...
            ..#....#....#................###...#......#.....#..#....#..........#.........#.#..#.................#.#..#............#.....##..#..
            ....#.......##........##...#..##........#........#..##............#.........#..##...#.....#..#...#.......#.............#........#..
            .#...#...##.............#........##...#.....#.##....#...#.....#..........##..............#................................##.#.#...
            .....#.......##.........#.....#.....#..#.###..#......#......##..............#................#..##..................##......###..#.
            .##...####.......#..........#.........#...#........................##....#......#.......#........#.....#.........#..........#.#....
            ..................#...........#..#.....#..#........#...................#............#..........#..#.#...........#.#....#....#......
            ........#..#....................................#..................#.#................#..#....#.#.......................#....#.....
            .#..............##..............##.##....##..##...#...##......##......#......#..........#....#..................................#..
            .#....#.....#....##..............#.##..##...#.......#.##.......##..#.............#.#.....#...#......#............#..........##.....
            ..................##............#...##.................#...#.##...#.........#....#....#....#..#.....#........#..........#...#.#..#.
            .##.......#........#.#.........#......................#.#..#.#........#.....................#.#.............###........#.#.........
            .#..........#....#.....#...........#....#..........###................#.#.#...#.##......#...................#....#.....#.......#...
            ...#....#..#..#.......#.#..............#........#........###.#.....#....#...#.....##.......................#....#...........#....#.
            ..#.................................#.....###......#......##...#...#.......#............##.....#........#.#........................
            .#...........#....#......#.......................#........##........#.........#.....#.....#....#............###..#...#.#....#......
            .......#.#......#.#....................#.##................#.#...........#...........#.#...##........................#.............
            ....#......#....#.......#.....................#.#..#........#..........#..#..#.......#.#..............#......#..............#......
            .....#......#.......#....................#.......#..#...####.##....#...#.#.......##...#.#...........#..............#..........#....
            ..#.........#........##....#.............##.#.#.........#....##........#..#........................#...#.#..#....#.................
            .#....#..#.##.......#..#..#...##............##.##..#..#......#.##.......#.................#......................##.....#........#.
            ..................#.........#............#...##......................#...............#...........#................#.....#....#.#...
            ..#......##............#.......#.#................#.....#..........................#..#...................#....#....#.........#....
            .#.#........#....#..##..#.....#.#...............#.......##..#.........#.....#........#...............##............................
            ..#.........##...................#.#........##......#.#.......##......##.#..#....#.#.#...........#..##...................#.......#.
            ....#.#.##.....###..#..........#....#..............#.###....#......##.............##...........#........#...........#...........##.
            .#...##..#......##....#........##.#..............#.......##..#.....#....##.....................#...##..#............#..........#...
            ....#...#..........#...........#.#.#..............##.#.#.....###..................#.............#....#.....####....................
            ........#..#.........###........................#.#..#..........#.............................#...#......#.............##..........
            .....#...#.............#.....#....#...#..............##.##........#..#...##.....#...............#..............#....#...#....#.....
            ....#.#...........#...#.##.....##....#.#...........##....#.....#...............................#.#.#...#.....#..#........#.........
            ...##...........................##..##.................##....#........#.....#...........#....#.....#............##.......#.........
            ............#.....#.....#......##...........................................#.........#.....#......#............#........#.#.#.....
            ......##...#....#...#...#.......#...........................#..#...#.#................#..........#...#.##..........#....##.#.......
            .....#...#.#..###.#.#.........#.#..........#...........#.....#.............................#..#.#....#.#.....#.....#..#......#.....
            .#.....#...#....................#...............................#.....#.............#.##.....####..##.....#.###....#..#............
            ....#...#.............#.#....#.....#..#..#...#.............#.......................#.#........#..#...#.................#...#.#...#.
            ..........#..#...#.....#..........#...#....#.#.....................#............................#....#.#......#.#.............#....
            ..##.....#...#......#.#....#....#.##.#....#......#........##........#...........#..#........#......#.#.....................#.#.....
            ......#...####.......#......#..##..###.......#...............#........#.........#....#.#.............##........##..#.#......#......
            ....##.##..........#.#.#.#.#..#.....##......................#.....#.#......................#....#.................#...........#....
            .......#..##.#.#..##...#...........................#............................#....##.......#........#......#..........#.#.......
            .....#.##.......#................#...#........#...#.............................#..#........#......###.###....#...##.............#.
            .......#............##..........##..#.#.....#...................#................................#..#...#...#........#....#......#.
            .#.#.#.#..#...#...........#.#.....#...................#.#......................#......##.....#..................#...##..#.#........
            ............#...............#...#........##....#..#...........................#.#..#.....#.##.................#...#....#......#....
            .....#.......#.............................#......#..#.#..#.....................#...........#...#........#.#........#....#.........
            .#.##..#............#..#.................................................#...#..###................##........##.#..#......#......#.
            .........#...............##......#............#.....#...........................#.............##.#.#.#.......###.....#..........#..
            ...................................................................................................................................
            """;
}
